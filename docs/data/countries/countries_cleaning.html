---
redirect_from:
  - "/data/countries/countries-cleaning"
interact_link: content/data/countries/countries_cleaning.ipynb
kernel_name: python3
kernel_path: content/data/countries
has_widgets: false
title: |-
  Countries
pagenum: 21
prev_page:
  url: /data/brexit/README.html
next_page:
  url: /data/h3_grid/build_sd_h3_grid.html
suffix: .ipynb
search: file countriesclean gpkg cleaning countries dataset remove small islands antartica keep only relevant columns download

comment: "***PROGRAMMATICALLY GENERATED, DO NOT EDIT. SEE ORIGINAL FILES IN /content***"
---

    <main class="jupyter-page">
    <div id="page-info"><div id="page-title">Countries</div>
</div>
    <div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Cleaning-of-countries-dataset">Cleaning of countries dataset<a class="anchor-link" href="#Cleaning-of-countries-dataset"> </a></h2>
</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">display_markdown</span>

<span class="n">display_markdown</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="s2">&quot;README.md&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">(),</span> <span class="n">raw</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="jb_output_wrapper }}">
<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h1 id="Countries-data">Countries data<a class="anchor-link" href="#Countries-data"> </a></h1><p>This dataset contains administrative boundaries of countries.</p>
<ul>
<li><code>Source</code>: Natural Earth</li>
<li><code>URL</code></li>
</ul>
<blockquote><p><a href="https://www.naturalearthdata.com/downloads/10m-cultural-vectors/10m-admin-0-countries/">https://www.naturalearthdata.com/downloads/10m-cultural-vectors/10m-admin-0-countries/</a></p>
</blockquote>
<ul>
<li><code>Processing</code>: transformations documented in <code>countries_cleaning.ipynb</code><ul>
<li>Clean file: <code>countries_clean.geojson</code></li>
</ul>
</li>
</ul>

</div>

</div>
</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%</span><span class="k">matplotlib</span> inline

<span class="kn">import</span> <span class="nn">geopandas</span>
</pre></div>

    </div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>Remove small islands</li>
</ul>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">source_url</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;https://www.naturalearthdata.com/&quot;</span>\
              <span class="s2">&quot;http//www.naturalearthdata.com/download/&quot;</span>\
              <span class="s2">&quot;10m/cultural/ne_10m_admin_0_countries.zip&quot;</span>
             <span class="p">)</span>
<span class="n">source_url</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="jb_output_wrapper }}">
<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&#39;https://www.naturalearthdata.com/http//www.naturalearthdata.com/download/10m/cultural/ne_10m_admin_0_countries.zip&#39;</pre>
</div>

</div>
</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">ctys</span> <span class="o">=</span> <span class="n">geopandas</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">source_url</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">ctys</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="jb_output_wrapper }}">
<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&lt;matplotlib.axes._subplots.AxesSubplot at 0x7f3811b3fa10&gt;</pre>
</div>

</div>
</div>
<div class="jb_output_wrapper }}">
<div class="output_area">



<div class="output_png output_subarea ">
<img src="../../images/data/countries/countries_cleaning_6_1.png"
>
</div>

</div>
</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">areas</span> <span class="o">=</span> <span class="n">ctys</span><span class="o">.</span><span class="n">to_crs</span><span class="p">(</span><span class="n">epsg</span><span class="o">=</span><span class="mi">3857</span><span class="p">)</span><span class="o">.</span><span class="n">area</span>
</pre></div>

    </div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">areas</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">bins</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="jb_output_wrapper }}">
<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&lt;matplotlib.axes._subplots.AxesSubplot at 0x7f3811976250&gt;</pre>
</div>

</div>
</div>
<div class="jb_output_wrapper }}">
<div class="output_area">



<div class="output_png output_subarea ">
<img src="../../images/data/countries/countries_cleaning_8_1.png"
>
</div>

</div>
</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">smallest</span> <span class="o">=</span> <span class="n">areas</span><span class="o">.</span><span class="n">max</span><span class="p">()</span> <span class="o">/</span> <span class="mi">4000</span>
</pre></div>

    </div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">small</span> <span class="o">=</span> <span class="n">areas</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">areas</span><span class="o">&lt;</span><span class="n">smallest</span><span class="p">]</span><span class="o">.</span><span class="n">index</span>
<span class="n">large</span> <span class="o">=</span> <span class="n">ctys</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">ctys</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="n">small</span><span class="p">),</span> <span class="p">:]</span>
<span class="n">large</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="jb_output_wrapper }}">
<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&lt;matplotlib.axes._subplots.AxesSubplot at 0x7f38119b8450&gt;</pre>
</div>

</div>
</div>
<div class="jb_output_wrapper }}">
<div class="output_area">



<div class="output_png output_subarea ">
<img src="../../images/data/countries/countries_cleaning_10_1.png"
>
</div>

</div>
</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>Antartica</li>
</ul>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">ys</span> <span class="o">=</span> <span class="n">large</span><span class="o">.</span><span class="n">centroid</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">y</span>
<span class="n">large</span> <span class="o">=</span> <span class="n">large</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">ys</span> <span class="o">&gt;</span> <span class="n">ys</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span> <span class="p">:]</span>
</pre></div>

    </div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<hr>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%</span><span class="k">time</span> large = large.to_crs(epsg=3857)
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="jb_output_wrapper }}">
<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>CPU times: user 1.67 s, sys: 20.9 ms, total: 1.7 s
Wall time: 1.7 s
</pre>
</div>
</div>
</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">large</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="jb_output_wrapper }}">
<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&lt;matplotlib.axes._subplots.AxesSubplot at 0x7f3811b79650&gt;</pre>
</div>

</div>
</div>
<div class="jb_output_wrapper }}">
<div class="output_area">



<div class="output_png output_subarea ">
<img src="../../images/data/countries/countries_cleaning_15_1.png"
>
</div>

</div>
</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>Keep only relevant columns</li>
</ul>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">large</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="jb_output_wrapper }}">
<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>&lt;class &#39;geopandas.geodataframe.GeoDataFrame&#39;&gt;
Int64Index: 160 entries, 0 to 239
Data columns (total 95 columns):
 #   Column      Non-Null Count  Dtype   
---  ------      --------------  -----   
 0   featurecla  160 non-null    object  
 1   scalerank   160 non-null    int64   
 2   LABELRANK   160 non-null    int64   
 3   SOVEREIGNT  160 non-null    object  
 4   SOV_A3      160 non-null    object  
 5   ADM0_DIF    160 non-null    int64   
 6   LEVEL       160 non-null    int64   
 7   TYPE        160 non-null    object  
 8   ADMIN       160 non-null    object  
 9   ADM0_A3     160 non-null    object  
 10  GEOU_DIF    160 non-null    int64   
 11  GEOUNIT     160 non-null    object  
 12  GU_A3       160 non-null    object  
 13  SU_DIF      160 non-null    int64   
 14  SUBUNIT     160 non-null    object  
 15  SU_A3       160 non-null    object  
 16  BRK_DIFF    160 non-null    int64   
 17  NAME        160 non-null    object  
 18  NAME_LONG   160 non-null    object  
 19  BRK_A3      160 non-null    object  
 20  BRK_NAME    160 non-null    object  
 21  BRK_GROUP   0 non-null      object  
 22  ABBREV      160 non-null    object  
 23  POSTAL      160 non-null    object  
 24  FORMAL_EN   158 non-null    object  
 25  FORMAL_FR   5 non-null      object  
 26  NAME_CIAWF  159 non-null    object  
 27  NOTE_ADM0   5 non-null      object  
 28  NOTE_BRK    4 non-null      object  
 29  NAME_SORT   160 non-null    object  
 30  NAME_ALT    2 non-null      object  
 31  MAPCOLOR7   160 non-null    int64   
 32  MAPCOLOR8   160 non-null    int64   
 33  MAPCOLOR9   160 non-null    int64   
 34  MAPCOLOR13  160 non-null    int64   
 35  POP_EST     160 non-null    int64   
 36  POP_RANK    160 non-null    int64   
 37  GDP_MD_EST  160 non-null    float64 
 38  POP_YEAR    160 non-null    int64   
 39  LASTCENSUS  160 non-null    int64   
 40  GDP_YEAR    160 non-null    int64   
 41  ECONOMY     160 non-null    object  
 42  INCOME_GRP  160 non-null    object  
 43  WIKIPEDIA   160 non-null    int64   
 44  FIPS_10_    160 non-null    object  
 45  ISO_A2      160 non-null    object  
 46  ISO_A3      160 non-null    object  
 47  ISO_A3_EH   160 non-null    object  
 48  ISO_N3      160 non-null    object  
 49  UN_A3       160 non-null    object  
 50  WB_A2       160 non-null    object  
 51  WB_A3       160 non-null    object  
 52  WOE_ID      160 non-null    int64   
 53  WOE_ID_EH   160 non-null    int64   
 54  WOE_NOTE    160 non-null    object  
 55  ADM0_A3_IS  160 non-null    object  
 56  ADM0_A3_US  160 non-null    object  
 57  ADM0_A3_UN  160 non-null    int64   
 58  ADM0_A3_WB  160 non-null    int64   
 59  CONTINENT   160 non-null    object  
 60  REGION_UN   160 non-null    object  
 61  SUBREGION   160 non-null    object  
 62  REGION_WB   160 non-null    object  
 63  NAME_LEN    160 non-null    int64   
 64  LONG_LEN    160 non-null    int64   
 65  ABBREV_LEN  160 non-null    int64   
 66  TINY        160 non-null    int64   
 67  HOMEPART    160 non-null    int64   
 68  MIN_ZOOM    160 non-null    float64 
 69  MIN_LABEL   160 non-null    float64 
 70  MAX_LABEL   160 non-null    float64 
 71  NE_ID       160 non-null    int64   
 72  WIKIDATAID  160 non-null    object  
 73  NAME_AR     160 non-null    object  
 74  NAME_BN     160 non-null    object  
 75  NAME_DE     160 non-null    object  
 76  NAME_EN     160 non-null    object  
 77  NAME_ES     160 non-null    object  
 78  NAME_FR     160 non-null    object  
 79  NAME_EL     160 non-null    object  
 80  NAME_HI     160 non-null    object  
 81  NAME_HU     160 non-null    object  
 82  NAME_ID     160 non-null    object  
 83  NAME_IT     160 non-null    object  
 84  NAME_JA     160 non-null    object  
 85  NAME_KO     160 non-null    object  
 86  NAME_NL     160 non-null    object  
 87  NAME_PL     160 non-null    object  
 88  NAME_PT     160 non-null    object  
 89  NAME_RU     160 non-null    object  
 90  NAME_SV     160 non-null    object  
 91  NAME_TR     160 non-null    object  
 92  NAME_VI     160 non-null    object  
 93  NAME_ZH     160 non-null    object  
 94  geometry    160 non-null    geometry
dtypes: float64(4), geometry(1), int64(27), object(63)
memory usage: 120.0+ KB
</pre>
</div>
</div>
</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">tokeep</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">&quot;ADMIN&quot;</span><span class="p">,</span>
    <span class="s2">&quot;geometry&quot;</span>
         <span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>Write out to file</li>
</ul>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">large</span><span class="p">[</span><span class="n">tokeep</span><span class="p">]</span><span class="o">.</span><span class="n">to_file</span><span class="p">(</span><span class="s1">&#39;countries_clean.gpkg&#39;</span><span class="p">,</span> 
                      <span class="n">driver</span><span class="o">=</span><span class="s2">&quot;GPKG&quot;</span>
                     <span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<hr>
<p><a href="countries_clean.gpkg">[Download the <code>countries_clean.gpkg</code> file]</a></p>

</div>
</div>
</div>
</div>

 


    </main>
    